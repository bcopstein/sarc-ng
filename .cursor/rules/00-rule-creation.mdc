---
description: Apply when creating new rules, modifying existing rules, or working with the rule system structure
alwaysApply: false
---

# Rule Creation & Management Guidelines

> **PRIORITY**: HIGHEST - Essential for maintaining rule system integrity and AI agent performance

## **QUICK REFERENCE**

- Target 80-120 lines (sweet spot: ~100 lines) for optimal AI processing
- Use Quick Reference → Core Principles → Essential Patterns → Enforcement Checklist structure
- NEVER modify rule headers (YAML frontmatter) - use `search_replace` tool only
- Show 2-4 focused examples with CORRECT/AVOID contrasts
- Follow template exactly for predictable AI processing

## **CORE PRINCIPLES**

### **OPTIMAL AI PERFORMANCE FIRST**

- Target 80-120 lines total for maximum AI comprehension
- Use consistent structure across all rules for predictable processing
- Focus on actionable guidance over theoretical concepts
- Maintain logical flow from general principles to specific patterns

### **HEADER PROTECTION (CRITICAL)**

- **NEVER modify rule headers** (YAML frontmatter)
- **NEVER change `description` or `alwaysApply` values**
- Use `search_replace` tool ONLY for content changes below header
- Headers control rule discovery and application logic

## **ESSENTIAL PATTERNS**

### **Rule Structure Template**

```markdown
---
description: [Clear context-based trigger]
alwaysApply: [true/false]
---
# Rule Title
> **PRIORITY**: [HIGHEST/HIGH/MEDIUM] - [Context]

## **QUICK REFERENCE**
- Key principle (most critical first)

## **CORE PRINCIPLES**
### **PRIMARY PRINCIPLE**
- Clear, actionable guideline

## **ESSENTIAL PATTERNS**
### **Pattern Type**
```[language]
# CORRECT
example

# AVOID
counter_example
```

## **ENFORCEMENT CHECKLIST**

### **Category**

- [ ] Testable requirement

**CRITICAL**: Final emphasis!

```

### **Safe Modification Process**

1. Read file first with `read_file`
2. Use `search_replace` ONLY (never `edit_file`)
3. Modify content below YAML headers only
4. Verify headers remain intact

## **WRITING GUIDELINES**

- **Quick Reference**: 5-8 bullets, action-oriented, most critical first
- **Core Principles**: 20-40 lines, bullet format, focus on "why" and "what"
- **Essential Patterns**: 30-50 lines, CORRECT/AVOID contrasts, real examples
- **Enforcement Checklist**: 10-15 lines, testable criteria, grouped logically

## **QUALITY TARGETS**

- **80-90 lines**: Focused, specific rules
- **90-110 lines**: Comprehensive domain rules
- **110-120 lines**: Complex architectural rules

## **RULE CREATION CHECKLIST**

### **Structure & Content**

- [ ] Length within 80-120 line target range
- [ ] Quick Reference has 5-8 actionable bullets
- [ ] Core Principles use consistent bullet formatting
- [ ] Essential Patterns show clear CORRECT/AVOID contrasts
- [ ] Enforcement Checklist has testable criteria

### **Header & System Compliance**

- [ ] Header preserved with correct description/alwaysApply
- [ ] Used `search_replace` tool only (never `edit_file`)
- [ ] Verified header integrity after modifications
- [ ] Final CRITICAL line reinforces key message

### **AI Optimization**

- [ ] Follows template exactly for predictable processing
- [ ] Consistent structure with existing rules
- [ ] Actionable guidance over theoretical concepts
- [ ] Logical flow from principles to implementation

**CRITICAL**: Rule headers are the foundation of Cursor's rule system - treat as immutable infrastructure while optimizing content for maximum AI agent performance!
